{"version":3,"file":"_server-DJcnicAY.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/preview/_server.js"],"sourcesContent":["import \"../../../../chunks/client.js\";\nimport * as prismic from \"@prismicio/client\";\nimport { c as createClient } from \"../../../../chunks/prismicio.js\";\nconst redirectToPreviewURL = async (config) => {\n  const previewToken = new URL(config.request.url).searchParams.get(\"token\") ?? void 0;\n  const documentID = new URL(config.request.url).searchParams.get(\"documentId\") ?? void 0;\n  const routePrefix = config.routePrefix ?? \"preview\";\n  const previewURL = await config.client.resolvePreviewURL({\n    previewToken,\n    documentID,\n    defaultURL: config.defaultURL || \"/\"\n  });\n  if (previewToken) {\n    config.cookies.set(prismic.cookie.preview, previewToken, {\n      path: \"/\",\n      httpOnly: false\n    });\n  }\n  return new Response(void 0, {\n    status: 307,\n    headers: {\n      Location: \"/\" + routePrefix + previewURL\n    }\n  });\n};\nasync function GET({ fetch, request, cookies }) {\n  const client = createClient({ fetch });\n  return await redirectToPreviewURL({ client, request, cookies });\n}\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;;AAGA,MAAM,oBAAoB,GAAG,OAAO,MAAM,KAAK;AAC/C,EAAE,MAAM,YAAY,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,KAAK,CAAC,CAAC;AACvF,EAAE,MAAM,UAAU,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,YAAY,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,KAAK,CAAC,CAAC;AAC1F,EAAE,MAAM,WAAW,GAAG,MAAM,CAAC,WAAW,IAAI,SAAS,CAAC;AACtD,EAAE,MAAM,UAAU,GAAG,MAAM,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC;AAC3D,IAAI,YAAY;AAChB,IAAI,UAAU;AACd,IAAI,UAAU,EAAE,MAAM,CAAC,UAAU,IAAI,GAAG;AACxC,GAAG,CAAC,CAAC;AACL,EAAE,IAAI,YAAY,EAAE;AACpB,IAAI,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,EAAE,YAAY,EAAE;AAC7D,MAAM,IAAI,EAAE,GAAG;AACf,MAAM,QAAQ,EAAE,KAAK;AACrB,KAAK,CAAC,CAAC;AACP,GAAG;AACH,EAAE,OAAO,IAAI,QAAQ,CAAC,KAAK,CAAC,EAAE;AAC9B,IAAI,MAAM,EAAE,GAAG;AACf,IAAI,OAAO,EAAE;AACb,MAAM,QAAQ,EAAE,GAAG,GAAG,WAAW,GAAG,UAAU;AAC9C,KAAK;AACL,GAAG,CAAC,CAAC;AACL,CAAC,CAAC;AACF,eAAe,GAAG,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,EAAE;AAChD,EAAE,MAAM,MAAM,GAAG,YAAY,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;AACzC,EAAE,OAAO,MAAM,oBAAoB,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;AAClE;;;;"}